version: '3.8'

services:
  # MQTT Broker
  mosquitto:
    image: eclipse-mosquitto:2
    container_name: snmp-bridge-mqtt
    ports:
      - "1883:1883"
      - "9001:9001"
    volumes:
      - ./docker/mosquitto/config:/mosquitto/config
      - mosquitto-data:/mosquitto/data
      - mosquitto-log:/mosquitto/log
    restart: unless-stopped

  # SNMP-MQTT Bridge (for full container testing)
  # Uncomment to test the Docker build
  # snmp-bridge:
  #   build:
  #     context: .
  #     dockerfile: docker/Dockerfile
  #   container_name: snmp-bridge
  #   ports:
  #     - "18888:8080"
  #     - "162:162/udp"
  #   environment:
  #     - SNMP_BRIDGE_MQTT_BROKER=mosquitto
  #     - SNMP_BRIDGE_MQTT_PORT=1883
  #   volumes:
  #     - snmp-bridge-data:/data
  #   depends_on:
  #     - mosquitto
  #   restart: unless-stopped

volumes:
  mosquitto-data:
  mosquitto-log:
  snmp-bridge-data:
